(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(11),l=t.n(r),c=t(2),o=t(3),i=t.n(o),m="/api/persons",s=function(){return i.a.get(m).then(function(e){return e.data})},f=function(e){return i.a.post(m,e).then(function(e){return e.data})},d=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},b=function(e){return i.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},v=(t(37),function(e){var n=e.message;return n?u.a.createElement("div",{className:"success"}," ",n):null}),E=function(e){var n=e.message;return n?u.a.createElement("div",{className:"error"}," ",n):null},h=function(e){var n=e.person,t=e.handleDeletePerson;return u.a.createElement("form",{onSubmit:t},u.a.createElement("label",null,n.name," ",n.number," "),u.a.createElement("button",{type:"submit"},"poista"))},p=function(e){var n=e.value,t=e.handler;return u.a.createElement("form",null,u.a.createElement("label",null,"rajaa n\xe4ytett\xe4vi\xe4: "),u.a.createElement("input",{value:n,onChange:t}))},w=function(e){var n=e.submitHandler,t=e.newName,a=e.newNameHandler,r=e.newNumber,l=e.newNumberHandler;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,u.a.createElement("label",null,"nimi: "),u.a.createElement("input",{value:t,onChange:a})),u.a.createElement("div",null,u.a.createElement("label",null,"numero: "),u.a.createElement("input",{value:r,onChange:l})),u.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))},j=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],l=Object(a.useState)(""),o=Object(c.a)(l,2),i=o[0],m=o[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),g=O[0],N=O[1],k=Object(a.useState)(""),S=Object(c.a)(k,2),H=S[0],y=S[1],C=Object(a.useState)(null),P=Object(c.a)(C,2),D=P[0],L=P[1],T=Object(a.useState)(null),J=Object(c.a)(T,2),x=J[0],B=J[1];Object(a.useEffect)(function(){s().then(function(e){return r(e)})},[]);var I=function(e){return e.name.toLowerCase().includes(H.toLowerCase())};return u.a.createElement("div",null,u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(v,{message:D}),u.a.createElement(E,{message:x}),u.a.createElement(p,{value:H,handler:function(e){y(e.target.value)}}),u.a.createElement("h3",null,"Lis\xe4\xe4 numero"),u.a.createElement(w,{submitHandler:function(e){e.preventDefault();var n=t.find(function(e){return e.name===i}),a={name:i,number:g};n?window.confirm("".concat(i," on jo luettelossa, korvataanko vanha numero uudella?"))&&d(n.id,a).then(function(e){r(t.map(function(t){return t.id!==n.id?t:e})),m(""),N(""),L("Muutettiin henkil\xf6n ".concat(n.name," numeroa")),setTimeout(function(){L(null)},5e3)}).catch(function(){B("Henkil\xf6 ".concat(n.name," oli jo poistettu")),setTimeout(function(){B(null)},5e3),r(t.filter(function(e){return e.id!==n.id}))}):(f(a).then(function(e){r(t.concat(e)),m(""),N("")}),L("Lis\xe4ttiin ".concat(a.name)),setTimeout(function(){L(null)},5e3))},newName:i,newNameHandler:function(e){m(e.target.value)},newNumber:g,newNumberHandler:function(e){N(e.target.value)}}),u.a.createElement("h3",null,"Numerot"),u.a.createElement("div",null,t.filter(I).map(function(e){return u.a.createElement(h,{key:e.id,person:e,handleDeletePerson:(n=e.id,function(e){e.preventDefault();var a=t.find(function(e){return e.id===n});window.confirm("Poistetaanko ".concat(a.name))&&(b(n).then(function(){return r(t.filter(function(e){return e.id!==n}))}),L("Poistettiin ".concat(a.name)),setTimeout(function(){L(null)},5e3))})});var n})))};l.a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.4fc7448c.chunk.js.map